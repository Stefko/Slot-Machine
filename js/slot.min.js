$(document).ready(function(){function e(e,t,s){this.speed=0,this.step=s,this.si=null,this.el=e,this.maxSpeed=t,this.pos=null,$(e).pan({fps:30,dir:"down"}),$(e).spStop()}function t(){$("#control").attr("disabled",!1)}function s(){$("#control").attr("disabled",!0)}var n=100;$("#coins").html(n);var o=0,a=[0,80,160,240,320,400,480,560,640,720,800,880,960,1040,1120,1200,1280,1360],p=[];p[0]=p[480]=p[960]=1,p[80]=p[560]=p[1040]=2,p[160]=p[640]=p[1120]=3,p[240]=p[720]=p[1200]=4,p[320]=p[800]=p[1280]=5,p[400]=p[880]=p[1360]=6,e.prototype.start=function(){var e=this;return $(e.el).addClass("motion"),$(e.el).spStart(),e.si=window.setInterval(function(){e.speed<e.maxSpeed&&(e.speed+=e.step,$(e.el).spSpeed(e.speed))},100),document.getElementsByTagName("audio")[2].play(),!1},e.prototype.stop=function(){var e=this;clearInterval(e.si),e.si=window.setInterval(function(){e.speed>30&&(e.speed-=e.step,$(e.el).spSpeed(e.speed)),e.speed<=30&&(e.finalPos(e.el),$(e.el).spSpeed(0),$(e.el).spStop(),clearInterval(e.si),$(e.el).removeClass("motion"),e.speed=0)},100)},e.prototype.finalPos=function(){var e,t,s,n,p,i,l,r=this.el,d=2e9;for(e=$(r).attr("id"),t=(t=document.getElementById(e).style.backgroundPosition).split(" ")[1],t=parseInt(t,10),p=0;p<a.length;p++)for(i=0;;i++)if((l=a[p]+1440*i)>t){l-t<d&&(d=l-t,s=l,this.pos=a[p]);break}n="0 "+(s+=1444)+"px",$(r).animate({backgroundPosition:"("+n+")"},{duration:200,complete:function(){o++}})},e.prototype.reset=function(){var e=$(this.el).attr("id");$._spritely.instances[e].t=0,$(this.el).css("background-position","0px 4px"),this.speed=0,o=0,$("#result").html("")};var i=new e("#slot1",30,1),l=new e("#slot2",45,2),r=new e("#slot3",70,3);$("#control").click(function(){var e;"Start"==this.innerHTML?(i.start(),l.start(),r.start(),this.innerHTML="Stop",s(),e=window.setInterval(function(){i.speed>=i.maxSpeed&&l.speed>=l.maxSpeed&&r.speed>=r.maxSpeed&&(t(),window.clearInterval(e))},100)):"Stop"==this.innerHTML?(i.stop(),l.stop(),r.stop(),this.innerHTML="Reset",s(),e=window.setInterval(function(){0===i.speed&&0===l.speed&&0===r.speed&&3===o&&(t(),window.clearInterval(e),function(){var e;e=p[i.pos]===p[l.pos]&&p[i.pos]===p[r.pos]?"<span class='win'>Du hast gewonnen</span>":"<span class='lose'>Du hast verloren</span>",$("#result").html(e)}(),p[i.pos]===p[l.pos]&&p[i.pos]===p[r.pos]?n+=50:n-=5,$("#coins").html(n),p[i.pos]===p[l.pos]&&p[i.pos]===p[r.pos]?(document.getElementsByTagName("audio")[2].pause(),document.getElementsByTagName("audio")[0].play()):(document.getElementsByTagName("audio")[2].pause(),document.getElementsByTagName("audio")[1].play()),0==n&&(document.location.href="lost.html"))},100)):(i.reset(),l.reset(),r.reset(),this.innerHTML="Start")})});