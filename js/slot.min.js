$(document).ready(function(){function e(e,t,s){this.speed=0,this.step=s,this.si=null,this.el=e,this.maxSpeed=t,this.pos=null,$(e).pan({fps:30,dir:"down"}),$(e).spStop()}function t(){$("#control").attr("disabled",!1)}function s(){$("#control").attr("disabled",!0)}var n=0,o=[0,80,165,237,310,378,454,539,624,696,769,837,913,1e3,1085,1157,1230,1298],p=[];p[0]=p[454]=p[913]=1,p[80]=p[539]=p[1e3]=2,p[165]=p[624]=p[1085]=3,p[237]=p[696]=p[1157]=4,p[310]=p[769]=p[1230]=5,p[378]=p[837]=p[1298]=6,e.prototype.start=function(){var e=this;$(e.el).addClass("motion"),$(e.el).spStart(),e.si=window.setInterval(function(){e.speed<e.maxSpeed&&(e.speed+=e.step,$(e.el).spSpeed(e.speed))},100)},e.prototype.stop=function(){var e=this;clearInterval(e.si),e.si=window.setInterval(function(){e.speed>30&&(e.speed-=e.step,$(e.el).spSpeed(e.speed)),e.speed<=30&&(e.finalPos(e.el),$(e.el).spSpeed(0),$(e.el).spStop(),clearInterval(e.si),$(e.el).removeClass("motion"),e.speed=0)},100)},e.prototype.finalPos=function(){var e,t,s,p,i,a,r,l=this.el,d=2e9;for(e=$(l).attr("id"),t=(t=document.getElementById(e).style.backgroundPosition).split(" ")[1],t=parseInt(t,10),i=0;i<o.length;i++)for(a=0;;a++)if((r=o[i]+1374*a)>t){r-t<d&&(d=r-t,s=r,this.pos=o[i]);break}p="0 "+(s+=1378)+"px",$(l).animate({backgroundPosition:"("+p+")"},{duration:200,complete:function(){n++}})},e.prototype.reset=function(){var e=$(this.el).attr("id");$._spritely.instances[e].t=0,$(this.el).css("background-position","0px 4px"),this.speed=0,n=0,$("#result").html("")};var i=new e("#slot1",30,1),a=new e("#slot2",45,2),r=new e("#slot3",70,3);$("#control").click(function(){var e;"Start"==this.innerHTML?(i.start(),a.start(),r.start(),this.innerHTML="Stop",s(),e=window.setInterval(function(){i.speed>=i.maxSpeed&&a.speed>=a.maxSpeed&&r.speed>=r.maxSpeed&&(t(),window.clearInterval(e))},100)):"Stop"==this.innerHTML?(i.stop(),a.stop(),r.stop(),this.innerHTML="Reset",s(),e=window.setInterval(function(){0===i.speed&&0===a.speed&&0===r.speed&&3===n&&(t(),window.clearInterval(e),function(){var e;e=p[i.pos]===p[a.pos]&&p[i.pos]===p[r.pos]?"<span class='win'>Du hast gewonnen</span>":"<span class='lose'>Du hast verloren</span>",$("#result").html(e)}(),p[i.pos]===p[a.pos]&&p[i.pos]===p[r.pos]?document.getElementsByTagName("audio")[0].play():document.getElementsByTagName("audio")[1].play())},100)):(i.reset(),a.reset(),r.reset(),this.innerHTML="Start")})});