$(document).ready(function(){function e(e,t,s){this.speed=0,this.step=s,this.si=null,this.el=e,this.maxSpeed=t,this.pos=null,$(e).pan({fps:30,dir:"down"}),$(e).spStop()}function t(){$("#control").attr("disabled",!1)}function s(){$("#control").attr("disabled",!0)}var n=0,o=[0,80,165,237,310,378,454,539,624,696,769,837,913,1e3,1085,1157,1230,1298],i=[];i[0]=i[454]=i[913]=1,i[80]=i[539]=i[1e3]=2,i[165]=i[624]=i[1085]=3,i[237]=i[696]=i[1157]=4,i[310]=i[769]=i[1230]=5,i[378]=i[837]=i[1298]=6,e.prototype.start=function(){var e=this;$(e.el).addClass("motion"),$(e.el).spStart(),e.si=window.setInterval(function(){e.speed<e.maxSpeed&&(e.speed+=e.step,$(e.el).spSpeed(e.speed))},100)},e.prototype.stop=function(){var e=this;clearInterval(e.si),e.si=window.setInterval(function(){e.speed>30&&(e.speed-=e.step,$(e.el).spSpeed(e.speed)),e.speed<=30&&(e.finalPos(e.el),$(e.el).spSpeed(0),$(e.el).spStop(),clearInterval(e.si),$(e.el).removeClass("motion"),e.speed=0)},100)},e.prototype.finalPos=function(){var e,t,s,i,p,r,a,l=this.el,d=2e9;for(e=$(l).attr("id"),t=(t=document.getElementById(e).style.backgroundPosition).split(" ")[1],t=parseInt(t,10),p=0;p<o.length;p++)for(r=0;;r++)if((a=o[p]+1374*r)>t){a-t<d&&(d=a-t,s=a,this.pos=o[p]);break}i="0 "+(s+=1378)+"px",$(l).animate({backgroundPosition:"("+i+")"},{duration:200,complete:function(){n++}})},e.prototype.reset=function(){var e=$(this.el).attr("id");$._spritely.instances[e].t=0,$(this.el).css("background-position","0px 4px"),this.speed=0,n=0,$("#result").html("")};var p=new e("#slot1",30,1),r=new e("#slot2",45,2),a=new e("#slot3",70,3);$("#control").click(function(){var e;"Start"==this.innerHTML?(p.start(),r.start(),a.start(),this.innerHTML="Stop",s(),e=window.setInterval(function(){p.speed>=p.maxSpeed&&r.speed>=r.maxSpeed&&a.speed>=a.maxSpeed&&(t(),window.clearInterval(e))},100)):"Stop"==this.innerHTML?(p.stop(),r.stop(),a.stop(),this.innerHTML="Reset",s(),e=window.setInterval(function(){0===p.speed&&0===r.speed&&0===a.speed&&3===n&&(t(),window.clearInterval(e),function(){var e;e=i[p.pos]===i[r.pos]&&i[p.pos]===i[a.pos]?"<span class='win'>Gl√ºckwunsch, Du hast gewonnen</span>":"<span class='lose'>Du hast verloren</span>",$("#result").html(e)}())},100)):(p.reset(),r.reset(),a.reset(),this.innerHTML="Start")})});